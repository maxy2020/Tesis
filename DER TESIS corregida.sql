-- MySQL Script generated by MySQL Workbench
-- 05/18/16 22:09:52
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema IndieGames
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema IndieGames
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `IndieGames` DEFAULT CHARACTER SET utf8 ;
USE `IndieGames` ;

-- -----------------------------------------------------
-- Table `IndieGames`.`user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IndieGames`.`user` (
  `iduser` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '',
  `username` VARCHAR(45) NOT NULL COMMENT '',
  `password` VARCHAR(60) NOT NULL COMMENT '',
  `email` VARCHAR(100) NOT NULL COMMENT '',
  `name` VARCHAR(45) NULL COMMENT '',
  `lastname` VARCHAR(45) NULL DEFAULT NULL COMMENT '',
  `status` BIT(1) NOT NULL COMMENT '',
  `experience` BIGINT NOT NULL COMMENT '',
  `level` SMALLINT(6) NOT NULL COMMENT '',
  `date` TIMESTAMP NOT NULL COMMENT '',
  `birthday` DATE NULL DEFAULT NULL COMMENT '',
  `hoursingame` INT NOT NULL COMMENT '',
  `avatar` VARCHAR(100) NULL DEFAULT NULL COMMENT '',
  PRIMARY KEY (`iduser`)  COMMENT '',
  UNIQUE INDEX `username_UNIQUE` (`username` ASC)  COMMENT '',
  UNIQUE INDEX `email_UNIQUE` (`email` ASC)  COMMENT '',
  UNIQUE INDEX `iduser_UNIQUE` (`iduser` ASC)  COMMENT '')
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `IndieGames`.`videogame`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IndieGames`.`videogame` (
  `idvideogame` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '',
  `title` VARCHAR(20) NOT NULL COMMENT '',
  `description` TEXT NULL DEFAULT NULL COMMENT '',
  `status` BIT(1) NOT NULL COMMENT '',
  `date` TIMESTAMP NOT NULL COMMENT '',
  `url` TEXT NOT NULL COMMENT '',
  `avatar` VARCHAR(100) NULL DEFAULT NULL COMMENT '',
  `user_iduser` INT UNSIGNED NOT NULL COMMENT '',
  PRIMARY KEY (`idvideogame`)  COMMENT '',
  INDEX `fk_videogame_user1_idx` (`user_iduser` ASC)  COMMENT '',
  UNIQUE INDEX `idvideogame_UNIQUE` (`idvideogame` ASC)  COMMENT '',
  CONSTRAINT `fk_videogame_user1`
    FOREIGN KEY (`user_iduser`)
    REFERENCES `IndieGames`.`user` (`iduser`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `IndieGames`.`comment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IndieGames`.`comment` (
  `idcomment` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '',
  `comment` TEXT NOT NULL COMMENT '',
  `status` BIT(1) NOT NULL COMMENT '',
  `date` TIMESTAMP NOT NULL COMMENT '',
  `user_iduser` INT UNSIGNED NOT NULL COMMENT '',
  `videogame_idvideogame` INT UNSIGNED NOT NULL COMMENT '',
  PRIMARY KEY (`idcomment`)  COMMENT '',
  INDEX `fk_comment_user1_idx` (`user_iduser` ASC)  COMMENT '',
  INDEX `fk_comment_videogame1_idx` (`videogame_idvideogame` ASC)  COMMENT '',
  UNIQUE INDEX `idcomment_UNIQUE` (`idcomment` ASC)  COMMENT '',
  CONSTRAINT `fk_comment_user1`
    FOREIGN KEY (`user_iduser`)
    REFERENCES `IndieGames`.`user` (`iduser`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_comment_videogame1`
    FOREIGN KEY (`videogame_idvideogame`)
    REFERENCES `IndieGames`.`videogame` (`idvideogame`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `IndieGames`.`vote`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IndieGames`.`vote` (
  `idvote` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '',
  `value` TINYINT(1) NULL DEFAULT NULL COMMENT '',
  `user_iduser` INT UNSIGNED NOT NULL COMMENT '',
  `videogame_idvideogame` INT UNSIGNED NOT NULL COMMENT '',
  PRIMARY KEY (`idvote`)  COMMENT '',
  INDEX `fk_vote_user_idx` (`user_iduser` ASC)  COMMENT '',
  INDEX `fk_vote_videogame1_idx` (`videogame_idvideogame` ASC)  COMMENT '',
  UNIQUE INDEX `idvote_UNIQUE` (`idvote` ASC)  COMMENT '',
  CONSTRAINT `fk_vote_user`
    FOREIGN KEY (`user_iduser`)
    REFERENCES `IndieGames`.`user` (`iduser`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_vote_videogame1`
    FOREIGN KEY (`videogame_idvideogame`)
    REFERENCES `IndieGames`.`videogame` (`idvideogame`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `IndieGames`.`Favorites`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IndieGames`.`Favorites` (
  `idFavorites` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '',
  `user_iduser` INT UNSIGNED NOT NULL COMMENT '',
  `videogame_idvideogame` INT UNSIGNED NOT NULL COMMENT '',
  PRIMARY KEY (`idFavorites`)  COMMENT '',
  INDEX `fk_Favorites_user1_idx` (`user_iduser` ASC)  COMMENT '',
  INDEX `fk_Favorites_videogame1_idx` (`videogame_idvideogame` ASC)  COMMENT '',
  UNIQUE INDEX `idFavorites_UNIQUE` (`idFavorites` ASC)  COMMENT '',
  CONSTRAINT `fk_Favorites_user1`
    FOREIGN KEY (`user_iduser`)
    REFERENCES `IndieGames`.`user` (`iduser`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Favorites_videogame1`
    FOREIGN KEY (`videogame_idvideogame`)
    REFERENCES `IndieGames`.`videogame` (`idvideogame`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IndieGames`.`blacklist`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IndieGames`.`blacklist` (
  `idblacklist` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '',
  `user_iduser` INT UNSIGNED NULL DEFAULT NULL COMMENT '',
  `comment` TEXT NULL DEFAULT NULL COMMENT '',
  `comment_idcomment` INT UNSIGNED NULL DEFAULT NULL COMMENT '',
  `videogame_idvideogame` INT UNSIGNED NULL DEFAULT NULL COMMENT '',
  PRIMARY KEY (`idblacklist`)  COMMENT '',
  INDEX `fk_blacklist_user_user1_idx` (`user_iduser` ASC)  COMMENT '',
  INDEX `fk_blacklist_comment1_idx` (`comment_idcomment` ASC)  COMMENT '',
  INDEX `fk_blacklist_videogame1_idx` (`videogame_idvideogame` ASC)  COMMENT '',
  UNIQUE INDEX `idblacklist_UNIQUE` (`idblacklist` ASC)  COMMENT '',
  CONSTRAINT `fk_blacklist_user_user1`
    FOREIGN KEY (`user_iduser`)
    REFERENCES `IndieGames`.`user` (`iduser`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_blacklist_comment1`
    FOREIGN KEY (`comment_idcomment`)
    REFERENCES `IndieGames`.`comment` (`idcomment`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_blacklist_videogame1`
    FOREIGN KEY (`videogame_idvideogame`)
    REFERENCES `IndieGames`.`videogame` (`idvideogame`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IndieGames`.`categories`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IndieGames`.`categories` (
  `idcategories` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '',
  `name` VARCHAR(45) NULL DEFAULT NULL COMMENT '',
  PRIMARY KEY (`idcategories`)  COMMENT '',
  UNIQUE INDEX `idcategories_UNIQUE` (`idcategories` ASC)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IndieGames`.`categories_has_videogame`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IndieGames`.`categories_has_videogame` (
  `categories_idcategories` INT UNSIGNED NOT NULL COMMENT '',
  `videogame_idvideogame` INT UNSIGNED NOT NULL COMMENT '',
  PRIMARY KEY (`categories_idcategories`, `videogame_idvideogame`)  COMMENT '',
  INDEX `fk_categories_has_videogame_videogame1_idx` (`videogame_idvideogame` ASC)  COMMENT '',
  INDEX `fk_categories_has_videogame_categories1_idx` (`categories_idcategories` ASC)  COMMENT '',
  CONSTRAINT `fk_categories_has_videogame_categories1`
    FOREIGN KEY (`categories_idcategories`)
    REFERENCES `IndieGames`.`categories` (`idcategories`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_categories_has_videogame_videogame1`
    FOREIGN KEY (`videogame_idvideogame`)
    REFERENCES `IndieGames`.`videogame` (`idvideogame`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IndieGames`.`friend`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IndieGames`.`friend` (
  `user_iduser` INT UNSIGNED NOT NULL COMMENT '',
  `user_iduser1` INT UNSIGNED NOT NULL COMMENT '',
  PRIMARY KEY (`user_iduser`, `user_iduser1`)  COMMENT '',
  INDEX `fk_user_has_user_user2_idx` (`user_iduser1` ASC)  COMMENT '',
  INDEX `fk_user_has_user_user1_idx` (`user_iduser` ASC)  COMMENT '',
  CONSTRAINT `fk_user_has_user_user1`
    FOREIGN KEY (`user_iduser`)
    REFERENCES `IndieGames`.`user` (`iduser`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_has_user_user2`
    FOREIGN KEY (`user_iduser1`)
    REFERENCES `IndieGames`.`user` (`iduser`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `IndieGames`.`user`
-- -----------------------------------------------------
START TRANSACTION;
USE `IndieGames`;
INSERT INTO `IndieGames`.`user` (`iduser`, `username`, `password`, `email`, `name`, `lastname`, `status`, `experience`, `level`, `birthday`, `hoursingame`, `avatar`) VALUES (1, 'test', '$2y$10$TyM08kGxvmwxwMe25Idd.uWMU2DgShVNv2DSiQJEncW.UtJdXA.1m', 'test@test.com', 'test', NULL, 1, 0, 0, NULL, 0, NULL);
INSERT INTO `IndieGames`.`user` (`iduser`, `username`, `password`, `email`, `name`, `lastname`, `status`, `experience`, `level`, `birthday`, `hoursingame`, `avatar`) VALUES (2, 'test2', '$2y$10$TyM08kGxvmwxwMe25Idd.uWMU2DgShVNv2DSiQJEncW.UtJdXA.1m', 'test2@test.com', 'test2', NULL, 1, 0, 0, NULL, 0, NULL);
INSERT INTO `IndieGames`.`user` (`iduser`, `username`, `password`, `email`, `name`, `lastname`, `status`, `experience`, `level`, `birthday`, `hoursingame`, `avatar`) VALUES (3, 'test3', '$2y$10$TyM08kGxvmwxwMe25Idd.uWMU2DgShVNv2DSiQJEncW.UtJdXA.1m', 'test3@test.com', 'test3', NULL, 0, 0, 0, NULL, 0, NULL);
INSERT INTO `IndieGames`.`user` (`iduser`, `username`, `password`, `email`, `name`, `lastname`, `status`, `experience`, `level`, `birthday`, `hoursingame`, `avatar`) VALUES (4, 'test4', '$2y$10$TyM08kGxvmwxwMe25Idd.uWMU2DgShVNv2DSiQJEncW.UtJdXA.1m', 'test4@test.com', 'test4', NULL, 1, 0, 0, NULL, 0, NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `IndieGames`.`videogame`
-- -----------------------------------------------------
START TRANSACTION;
USE `IndieGames`;
INSERT INTO `IndieGames`.`videogame` (`title`, `description`, `status`, `url`, `avatar`, `user_iduser`) VALUES ('Pinchar', 'Juego en el que se debe pinchar globos', 1,'http://play.avix.tv/pinchar/' , 'img/juegos/pinchar.jpg', 2);
INSERT INTO `IndieGames`.`videogame` (`title`, `description`, `status`, `url`, `avatar`, `user_iduser`) VALUES ('Meat Beat Mania', 'Se debe hacer bailar al personaje', 1,'http://play.avix.tv/meatbeat/' , 'img/juegos/meatbeat.jpg', 2);
INSERT INTO `IndieGames`.`videogame` (`title`, `description`, `status`, `url`, `avatar`, `user_iduser`) VALUES ('Triple Quest', 'Controlamos por separado las partes del guardian', 1,'http://play.avix.tv/triplequest/' , 'img/juegos/triplequest.jpg', 2);
INSERT INTO `IndieGames`.`videogame` (`title`, `description`, `status`, `url`, `avatar`, `user_iduser`) VALUES ('Mercaderes', 'Controlamos los barcos en bsae la viento', 1,'http://play.avix.tv/mercaderes5/' , 'img/juegos/mercaderes5.jpg', 2);
INSERT INTO `IndieGames`.`videogame` (`title`, `description`, `status`, `url`, `avatar`, `user_iduser`) VALUES ('Santa Sport', 'Santa debe lograr dejar los regalos en la chimenea', 1,'http://play.avix.tv/santa2015/' , 'img/juegos/santa2015.jpg', 2);
INSERT INTO `IndieGames`.`videogame` (`title`, `description`, `status`, `url`, `avatar`, `user_iduser`) VALUES ('Blastest', 'Debemos controlar una nave y vencer a la otra', 1,'http://play.avix.tv/blastest/' , 'img/juegos/blastest.jpg', 2);
INSERT INTO `IndieGames`.`videogame` (`title`, `description`, `status`, `url`, `avatar`, `user_iduser`) VALUES ('Ninja', 'Controlas un ninja y debes evitar las distintas trampas que van apareciendo', 1,'http://play.avix.tv/ninjatest/' , 'img/juegos/ninjatest.jpg', 2);
INSERT INTO `IndieGames`.`videogame` (`title`, `description`, `status`, `url`, `avatar`, `user_iduser`) VALUES ('Jumper', 'Usa un cubo y salta los obstaculos, muchos jugadores', 1,'http://play.avix.tv/jumpers/' , 'img/juegos/jumpers.jpg', 2);
INSERT INTO `IndieGames`.`videogame` (`title`, `description`, `status`, `url`, `avatar`, `user_iduser`) VALUES ('Turn Right', 'Dobla solo para la derecha ese es el reto', 1,'http://play.avix.tv/turnright/' , 'img/juegos/turnright.jpg', 2);

COMMIT;


-- -----------------------------------------------------
-- Data for table `IndieGames`.`comment`
-- -----------------------------------------------------
START TRANSACTION;
USE `IndieGames`;
INSERT INTO `IndieGames`.`comment` (`idcomment`, `comment`, `status`, `user_iduser`, `videogame_idvideogame`) VALUES (1, 'Muy bueno Juego, muy adictivo', 1, 1, 1);
INSERT INTO `IndieGames`.`comment` (`idcomment`, `comment`, `status`, `user_iduser`, `videogame_idvideogame`) VALUES (2, 'Es una forreada este juego, y el creador parece gay.', 0, 3, 1);
INSERT INTO `IndieGames`.`comment` (`idcomment`, `comment`, `status`, `user_iduser`, `videogame_idvideogame`) VALUES (3, 'bastante bueno esta el juego lo recomiendo', 1, 2, 2);

COMMIT;


-- -----------------------------------------------------
-- Data for table `IndieGames`.`vote`
-- -----------------------------------------------------
START TRANSACTION;
USE `IndieGames`;
INSERT INTO `IndieGames`.`vote` (`idvote`, `value`, `user_iduser`, `videogame_idvideogame`) VALUES (1, 4, 1, 1);
INSERT INTO `IndieGames`.`vote` (`idvote`, `value`, `user_iduser`, `videogame_idvideogame`) VALUES (2, 5, 1, 3);
INSERT INTO `IndieGames`.`vote` (`idvote`, `value`, `user_iduser`, `videogame_idvideogame`) VALUES (3, 5, 4, 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `IndieGames`.`Favorites`
-- -----------------------------------------------------
START TRANSACTION;
USE `IndieGames`;
INSERT INTO `IndieGames`.`Favorites` (`idFavorites`, `user_iduser`, `videogame_idvideogame`) VALUES (1, 1, 3);
INSERT INTO `IndieGames`.`Favorites` (`idFavorites`, `user_iduser`, `videogame_idvideogame`) VALUES (2, 1, 1);
INSERT INTO `IndieGames`.`Favorites` (`idFavorites`, `user_iduser`, `videogame_idvideogame`) VALUES (3, 2, 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `IndieGames`.`blacklist`
-- -----------------------------------------------------
START TRANSACTION;
USE `IndieGames`;
INSERT INTO `IndieGames`.`blacklist` (`idblacklist`, `user_iduser`, `comment`, `comment_idcomment`, `videogame_idvideogame`) VALUES (1, 3, 'Spam en los comentarios', NULL, NULL);
INSERT INTO `IndieGames`.`blacklist` (`idblacklist`, `user_iduser`, `comment`, `comment_idcomment`, `videogame_idvideogame`) VALUES (2, NULL, 'Juegos no apto para todo publico', NULL, 2);
INSERT INTO `IndieGames`.`blacklist` (`idblacklist`, `user_iduser`, `comment`, `comment_idcomment`, `videogame_idvideogame`) VALUES (3, NULL, 'Comentario que no cumple con los terminos del sitio.', 2, NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `IndieGames`.`categories`
-- -----------------------------------------------------
START TRANSACTION;
USE `IndieGames`;
INSERT INTO `IndieGames`.`categories` (`idcategories`, `name`) VALUES (1, 'Acción');
INSERT INTO `IndieGames`.`categories` (`idcategories`, `name`) VALUES (2, 'RPG');
INSERT INTO `IndieGames`.`categories` (`idcategories`, `name`) VALUES (3, 'FPS');
INSERT INTO `IndieGames`.`categories` (`idcategories`, `name`) VALUES (4, 'Estrategia');
INSERT INTO `IndieGames`.`categories` (`idcategories`, `name`) VALUES (5, 'Deportes');

COMMIT;


-- -----------------------------------------------------
-- Data for table `IndieGames`.`categories_has_videogame`
-- -----------------------------------------------------
START TRANSACTION;
USE `IndieGames`;
INSERT INTO `IndieGames`.`categories_has_videogame` (`categories_idcategories`, `videogame_idvideogame`) VALUES (1, 2);
INSERT INTO `IndieGames`.`categories_has_videogame` (`categories_idcategories`, `videogame_idvideogame`) VALUES (1, 3);
INSERT INTO `IndieGames`.`categories_has_videogame` (`categories_idcategories`, `videogame_idvideogame`) VALUES (2, 4);
INSERT INTO `IndieGames`.`categories_has_videogame` (`categories_idcategories`, `videogame_idvideogame`) VALUES (3, 5);

COMMIT;


-- -----------------------------------------------------
-- Data for table `IndieGames`.`friend`
-- -----------------------------------------------------
START TRANSACTION;
USE `IndieGames`;
INSERT INTO `IndieGames`.`friend` (`user_iduser`, `user_iduser1`) VALUES (1, 2);
INSERT INTO `IndieGames`.`friend` (`user_iduser`, `user_iduser1`) VALUES (1, 3);
INSERT INTO `IndieGames`.`friend` (`user_iduser`, `user_iduser1`) VALUES (1, 4);
INSERT INTO `IndieGames`.`friend` (`user_iduser`, `user_iduser1`) VALUES (2, 3);
INSERT INTO `IndieGames`.`friend` (`user_iduser`, `user_iduser1`) VALUES (2, 4);
INSERT INTO `IndieGames`.`friend` (`user_iduser`, `user_iduser1`) VALUES (3, 4);
INSERT INTO `IndieGames`.`friend` (`user_iduser`, `user_iduser1`) VALUES (4, 1);
INSERT INTO `IndieGames`.`friend` (`user_iduser`, `user_iduser1`) VALUES (4, 2);

COMMIT;

